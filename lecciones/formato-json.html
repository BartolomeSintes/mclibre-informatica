<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSON. Formatos. Informática. Bartolomé Sintes Marco. www.mclibre.org</title>
  <link rel="stylesheet" href="../varios/informatica.css" title="mclibre">
  <link rel="icon" href="../varios/favicon.ico">
  <link rel="stylesheet" href="../varios/highlight-informatica.css">
  <script src="../varios/highlight.pack.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
</head>

<body>
  <h1>JSON</h1>

  <nav>
    <p>
      <a href="../index.html"><img src="../varios/iconos/icono-informatica.svg" alt="Índice de Temas de Informática" title="Índice de Temas de Informática" height="48" width="48"></a>
      <a href="#"><img src="../varios/iconos/icono-arrow-circle-up.svg" alt="Principio de la página" title="Principio de la página" width="36" height="36"></a>
    </p>

    <div class="toc">
      <h2>JSON</h2>

      <ul>
        <li><a href="#que-es">Qué es</a></li>
        <li><a href="#sintaxis">Sintaxis</a></li>
        <li><a href="#usos">Usos de JSON</a>
          <ul>
            <li><a href="#json-rpc">JSON-RPC</a></li>
            <li><a href="#json-ld">JSON-LD</a></li>
          </ul>
        </li>
        <li><a href="#otros">Otros</a></li>
      </ul>
    </div>
  </nav>

  <section id="que-es">
    <h2>Qué es JSON</h2>

    <p><img src="../img/formatos/json-logo.svg" alt="logotipo de JSON" width="160" height="160" class="izquierda"><a href="http://json.org/">JSON</a> (JavaScript Object Notation) es un formato de texto pensado para el intercambio de datos. Su sintaxis está basada originalmente en la sintaxis de JavaScript, pero realmente es independiente de cualquier lenguaje de programación.</p>

    <p>El formato JSON fue definido por Douglas Crockford a finales de 2002 y dado a conocer a través de su página web <a href="http://json.org/">http://json.org/</a>. Esta página contenía la definición del formato y una implementación en Java. En poco tiempo el uso del formato se extendió y aparecieron implementaciones para todos los lenguajes de programación. El motivo de su éxito es su sencillez y facilidad de uso.</p>

    <hr class="corta">

    <p>El formato JSON se ha publicado además en forma de norma, tanto por la <a href="https://www.ietf.org/">IETF</a> como por <a href="http://www.ecma-international.org/">ECMA</a>, que también han definido otros formatos derivados como I-JSON.</p>

    <p class="mcl-svg-diagrama-temporal">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="820" viewBox="-50 -70 820 130">
        <title>Fechas de publicación de normas del formato JSON</title>
        <line x1="-50" y1="0" x2="820" y2="0" stroke-width="3" stroke="black" />
        <line x1="0" y1="-30" x2="0" y2="30" stroke-width="2" stroke-dasharray="5,5" stroke="black" />
        <text x="0" y="-40" text-anchor="middle" style="font-size: 100%">2000</text>
        <line x1="180" y1="-30" x2="180" y2="30" stroke-width="2" stroke-dasharray="5,5" stroke="black" />
        <text x="180" y="-40" text-anchor="middle" style="font-size: 100%">2005</text>
        <line x1="360" y1="-30" x2="360" y2="30" stroke-width="2" stroke-dasharray="5,5" stroke="black" />
        <text x="360" y="-40" text-anchor="middle" style="font-size: 100%">2010</text>
        <line x1="540" y1="-30" x2="540" y2="30" stroke-width="2" stroke-dasharray="5,5" stroke="black" />
        <text x="540" y="-40" text-anchor="middle" style="font-size: 100%">2015</text>
        <line x1="720" y1="-30" x2="720" y2="30" stroke-width="2" stroke-dasharray="5,5" stroke="black" />
        <text x="720" y="-40" text-anchor="middle" style="font-size: 100%">2020</text>

        <circle cx="103" cy="0" r="7" fill="black" />
        <text x="103" y="25" text-anchor="middle" fill="black" style="font-size: 90%; font-weight: bold">json.org</text>
        <circle cx="235" cy="0" r="7" fill="black" />
        <text x="235" y="25" text-anchor="middle" fill="black" style="font-size: 90%; font-weight: bold">RFC</text>
        <text x="235" y="45" text-anchor="middle" fill="black" style="font-size: 90%; font-weight: bold">4627</text>
        <circle cx="476" cy="0" r="7" fill="black" />
        <text x="476" y="25" text-anchor="middle" fill="black" style="font-size: 90%; font-weight: bold">RFC</text>
        <text x="476" y="45" text-anchor="middle" fill="black" style="font-size: 90%; font-weight: bold">7158</text>
        <circle cx="497" cy="0" r="7" fill="hsl(36, 100%, 50%)" />
        <text x="497" y="-35" text-anchor="middle" fill="hsl(36, 100%, 50%)" style="font-size: 90%; font-weight: bold">ECMA</text>
        <text x="497" y="-15" text-anchor="middle" fill="hsl(36, 100%, 50%)" style="font-size: 90%; font-weight: bold">404</text>
        <circle cx="512" cy="0" r="7" fill="black" />
        <text x="512" y="25" text-anchor="middle" fill="black" style="font-size: 90%; font-weight: bold">RFC</text>
        <text x="512" y="45" text-anchor="middle" fill="black" style="font-size: 90%; font-weight: bold">7159</text>
        <circle cx="647" cy="0" r="7" fill="black" />
        <text x="647" y="25" text-anchor="middle" fill="black" style="font-size: 90%; font-weight: bold">RFC</text>
        <text x="647" y="45" text-anchor="middle" fill="black" style="font-size: 90%; font-weight: bold">8259</text>
        <circle cx="647" cy="0" r="7" fill="hsl(36, 100%, 50%)" />
        <text x="647" y="-55" text-anchor="middle" fill="hsl(36, 100%, 50%)" style="font-size: 90%; font-weight: bold">ECMA</text>
        <text x="647" y="-35" text-anchor="middle" fill="hsl(36, 100%, 50%)" style="font-size: 90%; font-weight: bold">404</text>
        <text x="647" y="-15" text-anchor="middle" fill="hsl(36, 100%, 50%)" style="font-size: 90%; font-weight: bold">(2º ed)</text>
      </svg>
    </p>

    <p>Las últimas versiones de las normas son las siguientes:</p>
    <ul>
      <li>marzo de 2015: <a href="https://tools.ietf.org/html/rfc7493">RFC 7493</a>: The I-JSON Message Format, editada por Tim Bray</li>
      <li>diciembre de 2017: <a href="https://tools.ietf.org/html/rfc8259">RFC 8259</a>: The JavaScript Object Notation (JSON) Data Interchange Format, editada por Tim Bray</li>
      <li>diciembre de 2017: <a href="https://www.mclibre.org/descargar/docs/normas/json/ECMA-404-v2-1712.pdf">ECMA 404 (2º ed)</a>: The JSON Data Interchange Syntax</li>
    </ul>
  </section>

  <section id="sintaxis">
    <h2>Sintaxis de JSON</h2>

    <p>Las reglas sintáctica de JSON son bastante sencillas:</p>

    <ul>
      <li>En JSON existen dos tipos de elementos
        <ul>
          <li>matrices (<i>arrays</i>): Las matrices son listas de valores separados por comas. Las matrices se escriben entre corchetes [ ]
            <div class="filaflex">
              <div class="icono-ok"><img src="../varios/iconos/icono-oksi.svg" alt="Correcto" title="Correcto" width="40" height="40"></div>
              <div class="codigo">
                <pre>
<code class="language-json">[1, "pepe", 3.14, "Pepito Conejo"]</code>
</pre>
              </div>
            </div>
          </li>

          <li>objetos (<i>objects</i>). Los objetos son listas de parejas nombre / valor. El nombre y el valor están separados por dos puntos : y las parejas están separadas por comas. Los objetos se escriben entre llaves { } y los nombres de las parejas se escriben siempre entre comillas dobles.
            <div class="filaflex">
              <div class="icono-ok"><img src="../varios/iconos/icono-oksi.svg" alt="Correcto" title="Correcto" width="40" height="40"></div>
              <div class="codigo">
                <pre>
<code class="language-json">{"nombre": "Pepito Conejo", "edad": 25, "carnet de conducir": true}</code>
</pre>
              </div>
            </div>
          </li>
        </ul>
      </li>

      <li>Un documento JSON está formado por un único elemento (un objeto o una matriz).
        <div class="filaflex">
          <div class="icono-ok"><img src="../varios/iconos/icono-okno.svg" alt="Incorrecto" title="Incorrecto" width="40" height="40"></div>
          <div class="codigo">
            <pre>
<code class="language-json">[1, 2, 3], ["a", "b", "c"]</code>
</pre>
          </div>
        </div>
        <div class="filaflex">
          <div class="icono-ok"><img src="../varios/iconos/icono-okno.svg" alt="Incorrecto" title="Incorrecto" width="40" height="40"></div>
          <div class="codigo">
            <pre>
<code class="language-json">"nombre": "Pepito Conejo"</code>
</pre>
          </div>
        </div>
      </li>

      <li>Tanto en los objetos como en las matrices, el último elemento no puede ir seguido de una coma.
        <div class="filaflex">
          <div class="icono-ok"><img src="../varios/iconos/icono-okno.svg" alt="Incorrecto" title="Incorrecto" width="40" height="40"></div>
          <div class="codigo">
            <pre>
<code class="language-json">{"nombre": "Pepito Conejo",}</code>
</pre>
          </div>
        </div>
        <div class="filaflex">
          <div class="icono-ok"><img src="../varios/iconos/icono-okno.svg" alt="Incorrecto" title="Incorrecto" width="40" height="40"></div>
          <div class="codigo">
            <pre>
<code class="language-json">["nombre": "Pepito Conejo", "edad": 25, "carnet de conducir": true, ]</code>
</pre>
          </div>
        </div>
      </li>

      <li>Los espacios en blanco y los saltos de línea no son significativos, es decir, puede haber cualquier número de espacios en blanco o saltos de línea separando cualquier elemento o símbolo del documento.
        <div class="filaflex">
          <div class="icono-ok"><img src="../varios/iconos/icono-oksi.svg" alt="Correcto" title="Correcto" width="40" height="40"></div>
          <div class="codigo">
            <pre>
<code class="language-json">[
  {
    "nombre": "Pepito Conejo",
    "edad": 25,
    "carnet de conducir": true
  },
  {
    "nombre": "Ana Barberá",
    "edad": 90,
    "carnet de conducir": false
  }
]</code>
</pre>
          </div>
        </div>
      </li>

      <li>Los valores (tanto en los objetos como en las matrices) pueden ser:
        <ul>
          <li>números: enteros, decimales o en notación exponencial. El separador decimal es el punto ., un número negativo empieza por el signo menos - y el indicador de la notación exponencial es e o E. Los números positivos no pueden empezar por el signo +, los números no pueden empezar por varios ceros o por un cero seguido de otra cifra.</li>
          <li>cadenas. Las cadenas se escriben entre comillas dobles. Los caracteres especiales y los valores Unicode se escriben con una contrabarra \ delante. Los caracteres que deben escribirse siempre como caracteres especiales son \" (comillas), \\ (contrabarra), \b (retroceso), \f (salto de página), \n (salto de línea), \r (retorno de carro), \t (tabulador) y los caracteres unicode (\u...). El carácter / (barra) puede escribirse como carácter / o como carácter especial \/ (suele ser necesario cuando el contenido es código html y la barra indica un cierre de etiquetas).</li>
          <li>los valores true, false y null. Estos valores se escriben sin comillas.</li>
          <li>objetos y matrices. Puede haber objetos y matrices dentro de objetos y de matrices, sin límite de anidamiento.</li>
        </ul>
      </li>

      <li>Los ficheros JSON no pueden contener comentarios.</li>
    </ul>
  </section>

  <section id="usos">
    <h2>Usos de JSON</h2>

    <p>JSON se utiliza cada vez más en la web como sintaxis para usos concretos.</p>

    <section id="json-rpc">
      <h3>JSON-RPC: JSON Remote Procedure Call</h3>

      <p>En informática, los procedimientos remotos son una característica de los sistemas distribuidos. En un programa está distribuido entre varios ordenadores, los procedimientos remotos permiten que una parte del programa ejecute otra parte del programa situada en otro ordenador de forma transparente, es decir, sin que el programador se tenga que preocupar de dónde está situada cada parte.</p>

      <p>En general, cuando que un programa solicita información a otro programa situado en otro ordenador podemos decir que se trata de una llamada a un procedimiento remoto, aunque los dos programas sean completamente independientes.</p>

      <p>JSON-RPC es un formato para el intercambio de información entre dos programas. Utiliza la notación JSON y define una estructura y unos campos mínimos útiles para dar formato tanto a la petición como a la respuesta.</p>

      <p>Existen dos versiones de JSON-RPC, pero se recomienda utilizar la segunda versión:</p>
      <ul>
        <li>2005: <a href="https://www.jsonrpc.org/specification_v1">JSON-RPC 1.0</a>. Reemplazada por JSON-RPC 2.0 en marzo de 2010.</li>
        <li>marzo de 2010: <a href="https://www.jsonrpc.org/specification">JSON-RPC 2.0</a></li>
      </ul>

      <p>Una llamada RPC tiene que seguir la sintaxis de JSON y contener los siguientes campos:</p>
      <ul>
        <li><strong>jsonrpc</strong>: una cadena que indica la versión ("2.0")</li>
        <li><strong>method</strong>: una cadena que indica el método invocado.</li>
        <li><strong>params</strong>: (optativo) una matriz o una lista de valores</li>
        <li><strong>id</strong>: un número o cadena establecido por el cliente</li>
      </ul>

      <p>Si una llamada no incluye identificador id, se considera que es una notificación y no requiere respuesta, ni siquiera en caso de error.</p>

      <p>La respuesta RPC tiene que seguir también la sintaxis de JSON y contener los siguientes campos:</p>
      <ul>
        <li><strong>jsonrpc</strong>: una cadena que indica la versión ("2.0")</li>
        <li>uno de estos dos campos:
          <ul>
            <li><strong>result</strong>: (optativo) el resultado de la consulta, en forma de valor, matriz o lista.</li>
            <li><strong>error</strong>: (optativo) una matriz o una lista de errores, con la estructura siguiente:
              <ul>
                <li><strong>code</strong>: código de error (número entero)</li>
                <li><strong>message</strong>: descripción breve del error</li>
                <li><strong>data</strong>: (optativo) matriz o lista de valores con información adicional sobre el error</li>
              </ul>
            </li>
          </ul>
        </li>
        <li><strong>id</strong>: el número o cadena establecido por el cliente</li>
      </ul>

      <p>Una llamada JSON-RPC puede contener varias peticiones en forma de matriz y se debe contestar con una matriz de respuestas (salvo que todas las llamadas sean notificaciones, en cuyo caso no habría respuesta).</p>

      <p>Ejemplos de llamada y respuesta:</p>
      <ul>
        <li>Petición:
          <div class="codigo">
            <pre>
<code class="language-json">{
  "jsonrpc": "2.0",
  "method": "suma",
  "params": [3, 4, 5],
  "id": 181203
}</code>
</pre>
          </div>
        </li>
        <li>Respuesta:
          <div class="codigo">
            <pre>
<code class="language-json">{
  "jsonrpc": "2.0",
  "result": 12,
  "id": 181203
}</code>
</pre>
          </div>
        </li>
      </ul>
    </section>

    <section id="json-ld">
      <h3>JSON-LD: JSON Linked Data</h3>

      <p>JSON-LD es un formato desarrollado por el W3C y que utiliza la sintaxis de JSON para representar información referida a un elemento (un objeto, una persona, etc.). La información que se ofrece en un bloque de datos JSON-LD sobre un elemento consiste en una lista de características de ese elemento.</p>
      <ul>
        <li>Las características del elemento se enumeran en forma de clave : valor.</li>
        <li>las características del elemento se pueden agrupar en unos bloques predefinidos: @context, @id, @value, @language, @type, @container, @list, @set, @reverse, @index, @base, @vocab, @graph.</li>
      </ul>

      <p>Grupo de trabajo <strong>JSON-LD</strong> en el W3C: <a href="https://www.w3.org/2018/json-ld-wg/">Homepage</a> - Charter: <a href="https://www.w3.org/2018/03/jsonld-wg-charter.html">2018-2020</a></p>

      <p>Recomendaciones publicadas:</p>
      <ul>
        <li><a href="https://www.w3.org/TR/2020/REC-json-ld11-20200716/">JSON-LD 1.1</a>, A JSON-based Serialization for Linked Data, editada por Gregg Kellogg y otros.</li>
        <li><a href="https://www.w3.org/TR/2020/REC-json-ld11-framing-20200716/">JSON-LD 1.1 Framing</a>, An Extension to the Application Programming Interface for the JSON-LD Syntax, editada por Dave Longley y otros.</li>
        <li><a href="https://www.w3.org/TR/2020/REC-json-ld11-api-20200716/">JSON-LD 1.1 Processing Algorithms and API</a>, editada por Gregg Kellogg y otros.</li>
      </ul>
    </section>
  </section>

  <section id="otros">
    <h2>Otros</h2>

    <h3>Versiones obsoletas</h3>

    <p>Las versiones obsoletas de las normas sobre JSON son las siguientes:</p>
    <ul>
      <li>julio de 2006: <a href="https://tools.ietf.org/html/rfc4627">RFC 4627</a>: The application/json Media Type for JavaScript Object Notation, escrita por D. Crockford. Reemplazada en marzo de 2014 por la RFC 7159.</li>
      <li>marzo de 2013: <a href="https://tools.ietf.org/html/rfc7158">RFC 7158</a>: The JavaScript Object Notation (JSON) Data Interchange Format, editada por Tim Bray. Reemplazada en marzo de 2014 por la RFC 7159.</li>
      <li>octubre de 2013: <a href="https://www.mclibre.org/descargar/docs/normas/json/ECMA-404-v1-1310.pdf">ECMA 404 (1º ed)</a>: The JSON Data Interchange Format. Reemplazada en diciembre de 2017 por la segunda versión.</li>
      <li>enero de 2014: <a href="https://www.w3.org/TR/2014/REC-json-ld-20140116/">JSON-LD 1.0 (A JSON-based Serialization for Linked Data)</a>, editada por Manu Sporny y otros.</li>
      <li>enero de 2014: <a href="https://www.w3.org/TR/2014/REC-json-ld-api-20140116/">JSON-LD 1.0 Processing Algorithms and API</a>, editada por Dave Longley y otros.</li>
      <li>marzo de 2014: <a href="https://tools.ietf.org/html/rfc7159">RFC 7159</a>: The JavaScript Object Notation (JSON) Data Interchange Format, editada por Tim Bray. Reemplazada en diciembre de 2017 por la RFC 8259.</li>
    </ul>

    <hr class="corta">

    <h3>Otros usos de JSON</h3>
    <ul>
      <li><a href="https://microsoft.github.io/language-server-protocol/">Language Server Protocol</a>.
        <p>Si un editor o IDE de programación quiere permitir trabajar con un lenguaje de programación específico y ofrecer asistentes avanzados (completado de código, sugerencias, etc.), el editor tiene que "entender" ese lenguaje. En vez de que cada editor tenga que implementar su propio servidor de lenguaje, el protocolo LSP permite que el editor y el servidor de lenguaje sean independientes, comunicándose de acuerdo con el formato. Así, un mismo servidor de lenguaje se puede aprovechar en cualquier IDE que admita LSP y un mismo editor o IDE puede utilizarse para programar en cualquier lenguaje que disponga de un servidor de lenguaje.</p>
        <p>Este protocolo fue desarrollado para el editor Visual Studio Code. Fue <a href="https://code.visualstudio.com/blogs/2016/06/27/common-language-protocol">presentado</a> en junio de 2016.</p>
      </li>
    </ul>

    <hr class="corta">

    <h3>Referencias</h3>
    <ul>
      <li>Conferencia de Douglas Crockford, <a href="https://www.youtube.com/watch?v=-C-JoyNuQJs">The JSON saga</a>, agosto de 2011</li>
      <li><a href="https://jsonlint.com/">JSONLint</a>, validador de JSON</li>
      <li><a href="https://jsonapi.org/">JSON API</a>, especificación para construir APIs en JSON</li>
      <li><a href="https://twobithistory.org/2017/09/21/the-rise-and-rise-of-json.html">The Rise and Rise of JSON </a>, septiembre de 2017, de Sinclair Target. Historia de los orígenes de JSON.</li>
    </ul>
  </section>

  <footer>
    <p class="ultmod">Última modificación de esta página: 17 de julio de 2020</p>

    <p class="licencia">
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES"><img src="../varios/iconos/icono-cc-by-sa.svg" alt="Licencia Creative Commons" title="Licencia Creative Commons BY-SA" width="120" height="42"></a><br>
      Esta página forma parte del curso <strong><a href="https://www.mclibre.org/consultar/informatica/">Temas de Informática</a></strong> por <a href="https://www.mclibre.org/">Bartolomé Sintes Marco</a><br>
      que se distribuye bajo una <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES">Licencia Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional (CC BY-SA 4.0)</a>.
    </p>
  </footer>
</body>
</html>
